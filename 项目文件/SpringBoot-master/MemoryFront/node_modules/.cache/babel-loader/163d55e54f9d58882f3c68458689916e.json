{"remainingRequest":"D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\node_modules\\babel-loader\\lib\\index.js!D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\src\\views\\VisualdataSite.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\src\\views\\VisualdataSite.vue","mtime":1662356225000},{"path":"D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\babel.config.js","mtime":1662356225000},{"path":"D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\.babelrc","mtime":1662356225000},{"path":"D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719542185445},{"path":"D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\node_modules\\babel-loader\\lib\\index.js","mtime":1719542186130},{"path":"D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719542185445},{"path":"D:\\源代码及项目\\生产实习\\Picture-Master\\SpringBoot-master\\MemoryFront\\node_modules\\vue-loader\\lib\\index.js","mtime":1719542174992}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdWaXN1YWxkYXRhJywKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYXJ0czogbnVsbCwKICAgICAgLy/lm77ooajlr7nosaEKICAgICAgdG9rZW46ICcnLAogICAgICAvL3Rva2Vu5Yet6K+BCiAgICAgIHJlc2l6ZVRpbWVyOiBudWxsLAogICAgICBzZXJ2ZVVyTDogdGhpcy4kc2VydmVVckwsCiAgICAgIHNwb3RzOiBbJ+ilv+WuiScsICflronlurcnXSwKICAgICAgLy9iYXLlnLDngrkKICAgICAgc3BvdENvdW50OiBbMTIsIDEzXSAvL2JhcuaVsOmHjwoKICAgIH07CiAgfSwKCiAgLy/osIPnlKgKICBtb3VudGVkKCkgewogICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gewogICAgICBpZiAodGhpcy5yZXNpemVUaW1lcikgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVyKTsKICAgICAgfQoKICAgICAgdGhpcy5yZXNpemVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuY2hhcnRzLnJlc2l6ZSgpOwogICAgICB9LCA1MDApOwogICAgfTsKCiAgICB2YXIgY29va2llID0gdGhpcy4kY29va2llLmdldENvb2tpZSgpOwoKICAgIGlmIChjb29raWVbMF0gIT0gInRva2VuIikgewogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiAn55m75b2V5bey6L+H5pyfIScsCiAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICB9KTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdsb2dpbicKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnRva2VuID0gY29va2llWzFdOwogICAgfQoKICAgIHRoaXMuc2VsZWN0SW1hZ2VDb3VudCgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOS4i+i9veWbvueJhwogICAgZG93bmxvYWRJbWFnZSgpIHsKICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgbGluay5kb3dubG9hZCA9ICLlm77niYfnsbvlnovliIbluIPppbzlm74iOwogICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hhcnRzKTsKICAgICAgbGluay5ocmVmID0gdGhpcy5jaGFydHMuZ2V0RGF0YVVSTCh7CiAgICAgICAgdHlwZTogJ3BuZycsCiAgICAgICAgcGl4ZWxSYXRpbzogMS41LAogICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmYnCiAgICAgIH0pOyAvLyDlr7zlh7rlm77ooajlm77niYfvvIzov5Tlm57kuIDkuKogYmFzZTY0IOeahCBVUkwKCiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChsaW5rLmhyZWYpOyAvL+mHiuaUvlVSTOWvueixoQoKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgIH0sCgogICAgLy/mn6Xor6LmiYDmnInlm77niYfnsbvlnosKICAgIHNlbGVjdEltYWdlQ291bnQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Rva2VuJywgdGhpcy50b2tlbik7CiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIHVybDogX3RoaXMuc2VydmVVckwgKyAiL3Zpc3VhbC9zZWxlY3RUeXBlU2l0ZSIsCiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgZGF0YTogZm9ybURhdGEKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzLnNwb3RzID0gcmVzcC5kYXRhLmRhdGEuaW1hZ2VTaXRlOwogICAgICAgIF90aGlzLnNwb3RDb3VudCA9IHJlc3AuZGF0YS5kYXRhLlNpdGVOdW1iZXI7CgogICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5kcmF3YmFyKCdlY2hhcnQnKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIGRyYXdiYXIoaWQpIHsKICAgICAgdGhpcy5jaGFydHMgPSB0aGlzLiRlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKTsKICAgICAgdGhpcy5jaGFydHMuc2V0T3B0aW9uKHsKICAgICAgICB0aXRsZTogewogICAgICAgICAgY29sb3I6ICdyZXMnLAogICAgICAgICAgdGV4dDogJ+aLjeaRhOWcsOeCueWIhuW4g+afseeKtuWbvicsCiAgICAgICAgICBzdWJ0ZXh0OiAn5p2l5rqQ5LqO5pWw5o2u5bqTJywKICAgICAgICAgIGxlZnQ6ICdjZW50ZXInCiAgICAgICAgfSwKICAgICAgICB4QXhpczogewogICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgIGRhdGE6IHRoaXMuc3BvdHMsCiAgICAgICAgICBuYW1lOiAn5ouN5pGE5Zyw54K5JwogICAgICAgIH0sCiAgICAgICAgeUF4aXM6IHsKICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICBuYW1lOiAn5Zu+54mH5pWw6YePJwogICAgICAgIH0sCiAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgZGF0YTogdGhpcy5zcG90Q291bnQsCiAgICAgICAgICB0eXBlOiAnYmFyJywKICAgICAgICAgIHNob3dCYWNrZ3JvdW5kOiB0cnVlLAogICAgICAgICAgYmFja2dyb3VuZFN0eWxlOiB7CiAgICAgICAgICAgIGNvbG9yOiAncmdiYSgxODAsIDE4MCwgMTgwLCAwLjIpJwogICAgICAgICAgfQogICAgICAgIH1dCiAgICAgIH0pOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":"AAcA;EACAA,kBADA;;EAEAC;IACA;MACAC,YADA;MACA;MACAC,SAFA;MAEA;MACAC,iBAHA;MAIAC,wBAJA;MAKAC,mBALA;MAKA;MACAC,mBANA,CAMA;;IANA;EAQA,CAXA;;EAYA;EACAC;IACAC;MACA;QACAC;MACA;;MACA;QACA;MACA,CAFA,EAEA,GAFA;IAGA,CAPA;;IAQA;;IACA;MACA;QACAC,iBADA;QAEAC;MAFA;MAIA;QAAAZ;MAAA;IACA,CANA,MAOA;MACA;IACA;;IACA;EAEA,CAnCA;;EAoCAa;IACA;IACAC;MACA;MACAC;MACAA;MACAC;MACAD;QACAH,WADA;QAEAK,eAFA;QAGAC;MAHA,GALA,CASA;;MACAC;MACAJ;MACAK,+BAZA,CAYA;;MACAD;IACA,CAhBA;;IAiBA;IACAE;MACA;;MACA;MACAC;MACA;QACAC,8CADA;QAEAC,cAFA;QAGAvB;MAHA,GAIAwB,IAJA,CAIA;QAEAC;QACAA;;QACAA;UACAA;QACA,CAFA;MAIA,CAZA;IAaA,CAnCA;;IAqCAC;MACA;MACA;QACAC;UACAC,YADA;UAEAC,iBAFA;UAGAC,iBAHA;UAIAC;QAJA,CADA;QAOAC;UACArB,gBADA;UAEAX,gBAFA;UAGAD;QAHA,CAPA;QAYAkC;UACAtB,aADA;UAEAZ;QAFA,CAZA;QAgBAmC,SACA;UACAlC,oBADA;UAEAW,WAFA;UAGAwB,oBAHA;UAIAC;YACAR;UADA;QAJA,CADA;MAhBA;IA8BA;;EArEA;AApCA","names":["name","data","charts","token","resizeTimer","serveUrL","spots","spotCount","mounted","window","clearTimeout","message","type","methods","downloadImage","link","console","pixelRatio","backgroundColor","document","URL","selectImageCount","formData","url","method","then","_this","drawbar","title","color","text","subtext","left","xAxis","yAxis","series","showBackground","backgroundStyle"],"sourceRoot":"src/views","sources":["VisualdataSite.vue"],"sourcesContent":["<template>\n  <div id=\"v-main\">\n    <div id=\"v-title\">图片地理位置数据可视化</div>\n    <!--为echarts准备一个具备大小的容器dom-->\n    <div id=\"v-echart\">\n      <div id=\"echart\"></div>\n      <div class=\"button\">\n        <el-button type=\"primary\" @click=\"downloadImage()\">下载图表</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n\nexport default {\n  name: 'Visualdata',\n  data() {\n    return {\n      charts: null,//图表对象\n      token: '',  //token凭证\n      resizeTimer: null,\n      serveUrL: this.$serveUrL,\n      spots: ['西安', '安康'],  //bar地点\n      spotCount: [12, 13] //bar数量\n    }\n  },\n  //调用\n  mounted() {\n    window.onresize = () => {\n      if (this.resizeTimer) {\n        clearTimeout(this.resizeTimer)\n      }\n      this.resizeTimer = setTimeout(() => {\n        this.charts.resize();\n      }, 500)\n    };\n    var cookie = this.$cookie.getCookie();\n    if (cookie[0] != \"token\") {\n      this.$message({\n        message: '登录已过期!',\n        type: 'error'\n      });\n      this.$router.push({ name: 'login' });\n    }\n    else {\n      this.token = cookie[1];\n    }\n    this.selectImageCount();\n\n  },\n  methods: {\n    // 下载图片\n    downloadImage() {\n      const link = document.createElement('a');\n      link.download = \"图片类型分布饼图\";\n      link.style.display = 'none';\n      console.log(this.charts)\n      link.href = this.charts.getDataURL({\n        type: 'png',\n        pixelRatio: 1.5,\n        backgroundColor: '#fff'\n      }); // 导出图表图片，返回一个 base64 的 URL\n      document.body.appendChild(link);\n      link.click();\n      URL.revokeObjectURL(link.href); //释放URL对象\n      document.body.removeChild(link);\n    },\n    //查询所有图片类型\n    selectImageCount() {\n      var _this = this;\n      const formData = new FormData();\n      formData.append('token', this.token);\n      this.axios({\n        url: _this.serveUrL + \"/visual/selectTypeSite\",\n        method: \"post\",\n        data: formData,\n      }).then(function (resp) {\n\n        _this.spots = resp.data.data.imageSite;\n        _this.spotCount = resp.data.data.SiteNumber;\n        _this.$nextTick(function () {\n          _this.drawbar('echart');\n        });\n\n      });\n    },\n\n    drawbar(id) {\n      this.charts = this.$echarts.init(document.getElementById(id))\n      this.charts.setOption({\n        title: {\n          color: 'res',\n          text: '拍摄地点分布柱状图',\n          subtext: '来源于数据库',\n          left: 'center'\n        },\n        xAxis: {\n          type: 'category',\n          data: this.spots,\n          name: '拍摄地点'\n        },\n        yAxis: {\n          type: 'value',\n          name: '图片数量'\n        },\n        series: [\n          {\n            data: this.spotCount,\n            type: 'bar',\n            showBackground: true,\n            backgroundStyle: {\n              color: 'rgba(180, 180, 180, 0.2)'\n            }\n          }\n        ],\n\n\n      })\n\n    },\n\n  },\n\n}\n</script>\n<style scoped>\n#v-main {\n  width: 100%;\n  height: 90%;\n  position: relative;\n}\n\n#v-title {\n  margin-top: 1%;\n  margin-bottom: 2%;\n  text-align: center;\n  font-size: 25px;\n}\n\n#v-echart {\n  height: 90%;\n  width: 100%;\n  position: relative;\n}\n\n#echart {\n  position: absolute;\n  left: 3%;\n  height: 100%;\n  width: 80%;\n  display: inline-block;\n}\n\n.button {\n  position: absolute;\n  display: inline-block;\n  right: 5%;\n}\n</style>"]}]}