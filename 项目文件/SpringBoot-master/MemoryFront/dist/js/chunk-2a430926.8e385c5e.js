(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a430926"],{"3fc7":function(e,t,s){"use strict";s("c74d")},5369:function(e,t,s){},c74d:function(e,t,s){},cc34:function(e,t,s){"use strict";s("5369")},ee18:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{style:e.mainStyle,attrs:{id:"main"}},[t("div",{style:e.displayCheckedMenu,attrs:{id:"check_menu"}},[t("div",{staticClass:"check_menu_item"},[t("a",{on:{click:function(t){return e.handleCheckAllChange(!1)}}},[t("svg-icon",{attrs:{"icon-file-name":"chacha"}})],1)]),t("div",{staticClass:"check_menu_item check_menu_txt"},[e._v("已选择"+e._s(e.checkedCount)+"张相册")]),t("div",{staticClass:"check_menu_feature"},[t("a",{attrs:{title:"全选图片"},on:{click:function(t){return e.handleCheckAllChange(!e.checkedStatus)}}},[t("svg-icon",{attrs:{"icon-file-name":"all"}})],1),t("a",{attrs:{title:"删除相册"},on:{click:function(t){return e.deleteAlbums()}}},[t("svg-icon",{attrs:{"icon-file-name":"delete"}})],1)])]),t("div",{style:e.displayTopMenu,attrs:{id:"title"}},[t("h1",[e._v("相册集")])]),t("div",[t("el-row",{staticClass:"album"},[t("el-col",{staticClass:"album-el-col",attrs:{span:3,offset:1}},[t("a",{on:{click:function(t){return e.buildAblum()}}},[t("el-card",{attrs:{"body-style":{padding:"10px"},shadow:"hover"}},[t("div",{staticStyle:{"text-align":"center",height:"10em"}},[t("svg-icon",{staticStyle:{"font-size":"3em","margin-top":"1em"},attrs:{"icon-file-name":"addAlbum"}})],1),t("div",{staticClass:"album-el-txt"},[t("div",{staticStyle:{"text-align":"center","font-size":"21px",height:"42px"}},[t("a",[e._v("新建相册")])])])])],1)]),e._l(e.albumData,(function(s,a){return t("el-col",{key:a,staticClass:"album-el-col",attrs:{span:3,offset:1}},[t("a",[t("el-card",{staticClass:"card",attrs:{"body-style":{padding:"10px"},shadow:"hover"}},[t("el-checkbox-group",{staticClass:"check-box",style:e.displayCheckedMenu,on:{change:e.handleCheckedImgChange},model:{value:e.checkedImgIndex,callback:function(t){e.checkedImgIndex=t},expression:"checkedImgIndex"}},[t("el-checkbox",{attrs:{label:a}})],1),t("img",{staticClass:"album-el-img",attrs:{src:e.serveUrL+s.albumImg},on:{click:function(t){return e.openAblum(a)}}}),t("div",{staticClass:"album-el-txt"},[t("span",[e._v(e._s(s.albumName))]),t("div",[e._v("图片数量:"),t("a",[e._v(" "+e._s(s.imageNumber)+"张")])])])],1)],1)])}))],2)],1)])},i=[],n=(s("14d9"),{data(){return{mainStyle:{height:"500px"},albumName:"好吃的汉堡",ImageNumber:100,resizeTimer:null,token:"",serveUrL:this.$serveUrL,albumData:[{albumName:"美女",albumImg:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",albumId:"",imageNumber:100}],checkAll:!1,checkedImgIndex:[],checkedImgId:[],isIndeterminate:!1,checkedStatus:!1,checkedCount:0,displayTopMenu:"true",displayCheckedMenu:""}},mounted(){var e=this.$cookie.getCookie();"token"!=e[0]?(this.$message({message:"登录已过期!",type:"error"}),this.$router.push({name:"login"})):this.token=e[1],this.selectAlbums();let t=window.document.body.clientHeight;this.mainStyle.height=.75*t+"px",window.onresize=()=>{console.log(),this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{let e=window.document.body.clientHeight;this.mainStyle.height=.75*e+"px"},500)}},methods:{openAblum(e){let t=this.albumData[e].albumName;this.currentAlbumId=this.albumData[e].albumId,console.log(e),this.$message({type:"success",message:"打开成功 "}),this.$router.push({path:"/InsideAlbum",query:{albumId:this.currentAlbumId,albumName:t}})},selectAlbums(){var e=this;const t=new FormData;t.append("token",this.token),this.axios({url:this.serveUrL+"/album/selectAlbumName",method:"post",data:t}).then((function(t){"success"==t.data.status&&(e.albumData=t.data.data,console.log(e.albumData))}))},buildAblum(){this.$prompt("请输入新的相册名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:e})=>{this.handleCheckIndexToId();var t=this;const s=new FormData;s.append("token",this.token),s.append("albumName",e),this.axios({url:this.$serveUrL+"/album/addAlbum",method:"post",data:s}).then((function(s){"success"==s.data.status&&(t.dialogTableVisible=!1,t.$message({type:"success",message:"你的相册名字是: "+e}),t.selectAlbums())}))}).catch(()=>{this.$message({type:"info",message:"取消新建相册"})})},deleteAlbums(){this.$confirm("此操作将删除所选相册, 是否继续?","删除相册集",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log(1),this.handleCheckIndexToId();var e=this;const t=new FormData;t.append("token",this.token),t.append("albumIds",this.checkedImgId),this.axios({url:this.$serveUrL+"/album/deleteAlbumByIds",method:"post",data:t}).then((function(t){"success"==t.data.status&&(e.$message({message:"相册删除成功！",type:"success"}),e.handleCheckAllChange(!1),e.selectAlbums())}))})},SwitchDisplay(e){e>0?"display:none;"==this.displayTopMenu&&""!=this.displayTopMenu||(this.displayCheckedMenu="display:block",this.displayTopMenu="display:none;"):(this.displayCheckedMenu="",this.displayTopMenu="")},handleCheckAllChange(e){if(e){let e=this.albumData.length;this.checkedCount=e,this.checkedImgIndex=new Array(e);for(var t=0;t<e;t++)this.checkedImgIndex[t]=t}else this.checkedImgIndex=[],this.checkedCount=0;this.isIndeterminate=!1,this.checkedStatus=e,this.SwitchDisplay(this.checkedCount)},handleCheckIndexToId(){let e=this.checkedImgIndex.length;this.checkedImgId=new Array(e);for(let t=0;t<e;t++)this.checkedImgId[t]=this.albumData[this.checkedImgIndex[t]].albumId},handleCheckedImgChange(e){console.log(e.length),this.checkedCount=e.length,this.SwitchDisplay(this.checkedCount),this.checkAll=this.checkedCount===this.albumData.length,this.isIndeterminate=this.checkedCount>0&&this.checkedCount<this.albumData.length}}}),c=n,l=(s("cc34"),s("3fc7"),s("2877")),h=Object(l["a"])(c,a,i,!1,null,"2416efc6",null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2a430926.8e385c5e.js.map