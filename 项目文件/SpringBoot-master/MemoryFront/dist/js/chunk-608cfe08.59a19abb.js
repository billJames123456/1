(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-608cfe08"],{6970:function(e,t,a){},7803:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"register"},[e._m(0),t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",e._b({},"a-form-item",e.formItemLayout,!1),[t("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 账号  "),t("a-tooltip",{attrs:{title:"不得出现中文字符"}},[t("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入您的用户名",whitespace:!0}]}],expression:"[\n        'username',\n        {\n          rules: [{ required: true, message: '请输入您的用户名', whitespace: true }],\n        },\n      ]"}],attrs:{size:"large"}})],1),t("a-form-item",e._b({attrs:{label:"账号密码","has-feedback":""}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入账号密码!"},{validator:e.validateToNextPassword}]}],expression:"[\n        'password',\n        {\n          rules: [\n            {\n              required: true,\n              message: '请输入账号密码!',\n            },\n            {\n              validator: validateToNextPassword,\n            },\n          ],\n        },\n      ]"}],attrs:{type:"password",size:"large"}})],1),t("a-form-item",e._b({attrs:{label:"确认密码","has-feedback":""}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirm",{rules:[{required:!0,message:"请输入账号密码!"},{validator:e.compareToFirstPassword}]}],expression:"[\n        'confirm',\n        {\n          rules: [\n            {\n              required: true,\n              message: '请输入账号密码!',\n            },\n            {\n              validator: compareToFirstPassword,\n            },\n          ],\n        },\n      ]"}],attrs:{type:"password",size:"large"},on:{blur:e.handleConfirmBlur}})],1),t("a-form-item",e._b({attrs:{label:"E-mail"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{type:"email",message:"邮箱不合法!"},{required:!0,message:"请输入你的邮箱!"}]}],expression:"[\n        'email',\n        {\n          rules: [\n            {\n              type: 'email',\n              message: '邮箱不合法!',\n            },\n            {\n              required: true,\n              message: '请输入你的邮箱!',\n            },\n          ],\n        },\n      ]"}],attrs:{size:"large"},on:{change:e.codeChange}})],1),t("a-form-item",e._b({attrs:{label:"验证码"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["codeNumber",{rules:[{required:!0,message:"请输入你的验证码!"}]}],expression:"[\n        'codeNumber',\n        {\n          rules: [\n            {\n              required: true,\n              message: '请输入你的验证码!',\n            },\n          ],\n        },\n      ]"}],staticStyle:{width:"50%",float:"left","margin-right":"5%"},attrs:{size:"large",maxLength:10}}),t("a-button",{attrs:{type:"primary",disabled:e.codeState},on:{click:function(t){return e.sendCode()}}},[e._v(" "+e._s(e.codetxt)+" ")])],1),t("a-form-item",e._b({},"a-form-item",e.tailFormItemLayout,!1),[t("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["agreement",{valuePropName:"checked"}],expression:"['agreement', { valuePropName: 'checked' }]"}]},[e._v(" 我已经阅读 "),t("a",{attrs:{href:""}},[e._v(" 本网站协议 ")])])],1),t("a-form-item",e._b({},"a-form-item",e.tailFormItemLayout,!1),[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 点击注册 ")]),t("a-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary"},on:{click:e.gotoLogin}},[e._v(" 返回登录 ")])],1)],1)],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"title"},[t("h1",[e._v("用户注册")])])}],o=(a("14d9"),{data(){return{codeState:!1,codetxt:"获取验证码",confirmDirty:!1,autoCompleteResult:[],formItemLayout:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},tailFormItemLayout:{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}}},beforeCreate(){this.form=this.$form.createForm(this,{name:"register"})},methods:{codeChange(){},sendCode(){let e=this.form.getFieldValue("email"),t=this.form.getFieldError("email");if(void 0==e||""==e)return void this.form.validateFields(["email"]);if(t)return;this.codeState=!1;const a=60;var r=a;let s=setInterval(()=>{this.codetxt=r+"s后重新获取",r==a&&(this.codeState=!0),0==r&&(this.codeState=!1,this.codetxt="获取验证码",clearInterval(s)),r--},1e3),o=new FormData;o.append("email",e);var n=this;this.axios({url:n.$serveUrL+"/code",method:"post",data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"},crossDomain:!0}).then((function(e){}))},gotoLogin(){this.$router.go(-1)},handleSubmit(e){e.preventDefault(),this.form.validateFieldsAndScroll((e,t)=>{var a=this;e?this.$message({type:"warning",message:"请填写完整信息!"}):this.axios({url:a.$serveUrL+"/user/add",method:"post",data:t,transformRequest:[function(e){let t="";for(let a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t=t.substring(0,t.lastIndexOf("&")),t}],headers:{"Content-Type":"application/x-www-form-urlencoded"},crossDomain:!0}).then((function(e){"success"==e.data.status&&(a.$message({type:"success",message:"注册成功!"}),a.$router.push({name:"login"})),"codeError"==e.data.status&&a.$message({type:"fail",message:"验证码错误!"}),"exist"==e.data.status&&a.$message({type:"waring",message:"账号名已存在!"})}))})},handleConfirmBlur(e){const t=e.target.value;this.confirmDirty=this.confirmDirty||!!t},compareToFirstPassword(e,t,a){const r=this.form;t&&t!==r.getFieldValue("password")?a("两次输入的密码不一致"):a()},validateToNextPassword(e,t,a){console.log(t);const r=this.form;t&&this.confirmDirty&&r.validateFields(["confirm"],{force:!0}),a()}}}),n=o,i=(a("a912"),a("2877")),m=Object(i["a"])(n,r,s,!1,null,null,null);t["default"]=m.exports},a912:function(e,t,a){"use strict";a("6970")}}]);
//# sourceMappingURL=chunk-608cfe08.59a19abb.js.map