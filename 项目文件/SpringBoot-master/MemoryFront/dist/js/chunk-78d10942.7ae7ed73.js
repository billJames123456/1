(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78d10942"],{"126c":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t._m(0),e("div",{staticClass:"main-content"},[e("div",{staticClass:"form"},[e("el-form",{ref:"formdata",attrs:{model:t.formdata}},[e("el-form-item",{attrs:{label:"上传相册"}},[e("el-select",{ref:"formSelect",staticClass:"formItem",attrs:{placeholder:"不创建相册，可不选择"},model:{value:t.selectModel,callback:function(e){t.selectModel=e},expression:"selectModel"}},[t._l(t.albums,(function(a,l){return e("el-option",{key:l,attrs:{label:a.albumName,value:l}},[e("span",[t._v(t._s(a.albumName))])])})),e("el-input",{staticStyle:{"margin-left":"3%",width:"70%"},attrs:{placeholder:"没有请创建相册",size:"small"},model:{value:t.inputAlbum,callback:function(e){t.inputAlbum=e},expression:"inputAlbum"}}),e("i",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"10%",color:"#5cb6ff","font-weight":"800","font-size":"1.25em"},on:{click:t.createAlbum}}),e("div",{staticStyle:{margin:"5px 0 5px 0"},attrs:{slot:"empty"},slot:"empty"},[e("el-input",{staticStyle:{"margin-left":"3%",width:"70%"},attrs:{placeholder:"没有请创建相册",size:"small"},model:{value:t.inputAlbum,callback:function(e){t.inputAlbum=e},expression:"inputAlbum"}}),e("i",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"10%",color:"#5cb6ff","font-weight":"800","font-size":"1.25em"},on:{click:t.createAlbum}})],1)],2)],1),e("el-form-item",{attrs:{label:"图片类型"}},[e("el-select",{staticClass:"formItem",attrs:{placeholder:"请选择图片类型"},model:{value:t.formdata.imgtype,callback:function(e){t.$set(t.formdata,"imgtype",e)},expression:"formdata.imgtype"}},[e("el-option",{attrs:{label:"城市",value:"城市"}}),e("el-option",{attrs:{label:"人物",value:"人物"}}),e("el-option",{attrs:{label:"风景",value:"风景"}}),e("el-option",{attrs:{label:"动漫",value:"动漫"}}),e("el-option",{attrs:{label:"花草",value:"花草"}}),e("el-option",{attrs:{label:"文本",value:"文本"}}),e("el-option",{attrs:{label:"运动",value:"运动"}}),e("el-option",{attrs:{label:"游戏",value:"游戏"}}),e("el-option",{attrs:{label:"建筑",value:"建筑"}}),e("el-option",{attrs:{label:"截图",value:"截图"}}),e("el-option",{attrs:{label:"自拍",value:"自拍"}}),e("el-option",{attrs:{label:"动物",value:"动物"}})],1)],1),e("el-form-item",{attrs:{label:"拍摄地点"}},[e("el-input",{staticClass:"formItem",model:{value:t.formdata.imgSite,callback:function(e){t.$set(t.formdata,"imgSite",e)},expression:"formdata.imgSite"}})],1),e("el-form-item",{attrs:{label:"拍摄日期"}},[e("el-col",{staticClass:"formItem",attrs:{span:11}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.formdata.imgdate,callback:function(e){t.$set(t.formdata,"imgdate",e)},expression:"formdata.imgdate"}})],1)],1)],1)],1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.elProgress,expression:"elProgress"}],staticClass:"images",attrs:{"element-loading-text":t.progressText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"}},[e("el-upload",{ref:"upload",attrs:{action:"#","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-change":t.handleChange,"auto-upload":!1,multiple:!0,"file-list":t.fileList}},[e("i",{staticClass:"el-icon-plus"},[e("span",{staticStyle:{"font-size":"20px","vertical-align":"1px"}},[t._v("选择图片")])])]),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),e("div",{staticClass:"u-button-main"},[e("div",{staticClass:"u-button"},[e("div",{staticClass:"u-button-son1"},[e("el-button",{attrs:{type:"primary"},on:{click:t.SubmitImage}},[t._v("全部上传")]),e("div",{staticClass:"u-button-son2"},[e("el-button",{attrs:{type:"danger"}},[t._v("取消上传")])],1)],1)])])])])},s=[function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"title"}},[e("h1",[t._v("普通上传")])])}],i=(a("14d9"),{data(){return{token:"1111",albums:[],inputAlbum:"",formdata:{album:{albumName:"",albumId:"-1"},imgSite:"",imgtype:"",imgdate:""},elProgress:!1,progressText:"正在上传 1%",fileList:[],dialogImageUrl:"",dialogVisible:!1}},props:["userprop"],created(){},mounted(){var t=this.$cookie.getCookie();"token"!=t[0]?(this.$message({message:"登录已过期!",type:"error"}),this.$router.push({name:"login"})):this.token=t[1],this.selectAlbums()},computed:{selectModel:{get(){return this.formdata.album.albumName},set(t){this.formdata.album.albumId=this.albums[t].albumId,this.formdata.album.albumName=this.albums[t].albumName}}},methods:{selectAlbums(){var t=this;const e=new FormData;e.append("token",this.token),this.axios({url:this.$serveUrL+"/album/selectAlbumName",method:"post",data:e}).then((function(e){"success"==e.data.status&&(t.albums=e.data.data)}))},SubmitImage(){if(console.log(this.$refs.upload.fileList),0==this.fileList.length)return this.$message.warning("请选取文件后再上传");var t=this,e=new FormData;this.fileList.forEach(t=>{e.append("file",t.raw)}),e.append("albumId",this.formdata.album.albumId),e.append("albumName",this.formdata.album.albumName),e.append("imgSite",this.formdata.imgSite),e.append("imgType",this.formdata.imgtype),e.append("imgDate",this.formdata.imgdate),e.append("token",this.token),this.elProgress=!0,this.axios({url:this.$serveUrL+"/image/upload",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){if(e.lengthComputable){let a=parseInt(e.loaded/e.total*100);100==a&&a--,t.progressText="正在上传 "+a+"%"}}}).then((function(e){t.elProgress=!1,"success"==e.data.status?t.$message({type:"success",message:"上传图片成功!"}):t.$message({type:"fail",message:"上传图片失败!"})}))},createAlbum(){this.formdata.album.albumName=this.inputAlbum,this.formdata.album.albumId=0,this.$refs.formSelect.blur()},handleRemove(t,e){this.fileList=e,console.log(t,e)},handleChange(t,e){this.fileList=e},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}}),o=i,r=(a("d4fd"),a("2877")),m=Object(r["a"])(o,l,s,!1,null,"6566ede8",null);e["default"]=m.exports},b6de:function(t,e,a){},d4fd:function(t,e,a){"use strict";a("b6de")}}]);
//# sourceMappingURL=chunk-78d10942.7ae7ed73.js.map