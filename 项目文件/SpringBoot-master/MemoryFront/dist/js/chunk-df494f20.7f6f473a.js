(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df494f20"],{"852a":function(e,t,a){},9491:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[e._m(0),t("div",{staticClass:"main-content"},[t("div",{staticClass:"form"},[t("el-form",{ref:"formdata",attrs:{model:e.formdata}},[t("el-form-item",{attrs:{label:"上传相册"}},[t("el-select",{ref:"formSelect",staticClass:"formItem",attrs:{placeholder:"不创建相册，可不选择"},model:{value:e.selectModel,callback:function(t){e.selectModel=t},expression:"selectModel"}},[e._l(e.albums,(function(a,l){return t("el-option",{key:l,attrs:{label:a.albumName,value:l}},[t("span",[e._v(e._s(a.albumName))])])})),t("el-input",{staticStyle:{"margin-left":"3%",width:"70%"},attrs:{placeholder:"没有请创建相册",size:"small"},model:{value:e.inputAlbum,callback:function(t){e.inputAlbum=t},expression:"inputAlbum"}}),t("i",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"10%",color:"#5cb6ff","font-weight":"800","font-size":"1.25em"},on:{click:e.createAlbum}}),t("div",{staticStyle:{margin:"5px 0 5px 0"},attrs:{slot:"empty"},slot:"empty"},[t("el-input",{staticStyle:{"margin-left":"3%",width:"70%"},attrs:{placeholder:"没有请创建相册",size:"small"},model:{value:e.inputAlbum,callback:function(t){e.inputAlbum=t},expression:"inputAlbum"}}),t("i",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"10%",color:"#5cb6ff","font-weight":"800","font-size":"1.25em"},on:{click:e.createAlbum}})],1)],2)],1),t("el-form-item",{attrs:{label:"识别结果"}},[t("el-select",{staticClass:"formItem",attrs:{placeholder:"请选择识别结果数量"},model:{value:e.formdata.resNumber,callback:function(t){e.$set(e.formdata,"resNumber",t)},expression:"formdata.resNumber"}},e._l(e.resNumber,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"拍摄地点"}},[t("el-input",{staticClass:"formItem",model:{value:e.formdata.imgSite,callback:function(t){e.$set(e.formdata,"imgSite",t)},expression:"formdata.imgSite"}})],1),t("el-form-item",{attrs:{label:"拍摄日期"}},[t("el-col",{staticClass:"formItem",attrs:{span:11}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.formdata.imgdate,callback:function(t){e.$set(e.formdata,"imgdate",t)},expression:"formdata.imgdate"}})],1)],1)],1)],1),t("div",{staticClass:"images"},[t("el-upload",{ref:"upload",attrs:{action:"#","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-change":e.handleChange,"auto-upload":!1,multiple:!0,"file-list":e.fileList}},[t("i",{staticClass:"el-icon-plus"},[t("span",{staticStyle:{"font-size":"20px","vertical-align":"1px"}},[e._v("选择图片")])])]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),t("div",{staticClass:"u-button-main"},[t("div",{staticClass:"u-button"},[t("div",{staticClass:"u-button-son1"},[t("el-button",{attrs:{type:"primary"},on:{click:e.SubmitImage}},[e._v("全部上传")]),t("div",{staticClass:"u-button-son2"},[t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogTableVisible="true",e.progressText="未上传图片"}}},[e._v("查看结果")])],1)],1)])]),t("el-dialog",{attrs:{title:"识别结果",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,fit:!0,height:"480","element-loading-text":e.progressText}},[t("el-table-column",{attrs:{prop:"img",label:"图片"}}),e._l(e.formdata.resNumber,(function(e){return t("el-table-column",{key:e,attrs:{prop:"res"+e,label:"结果"+e}})}))],2)],1)],1)])},s=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"title"}},[t("h1",[e._v("AI智能识别上传")])])}],i=(a("14d9"),{data(){return{token:"",albums:[],inputAlbum:"",formdata:{album:{albumId:"-1",albumName:""},imgSite:"",resNumber:"",imgdate:""},resNumber:[{value:1,label:"1个"},{value:2,label:"2个"},{value:3,label:"3个"},{value:4,label:"4个"},{value:5,label:"5个"}],fileList:[],dialogImageUrl:"",dialogVisible:!1,tableData:[{img:"",res1:"",res2:"",res3:"",res4:"",res5:""}],progressText:"服务器开始识别分析",loading:!0,dialogTableVisible:!1}},computed:{selectModel:{get(){return this.formdata.album.albumName},set(e){this.formdata.album.albumId=this.albums[e].albumId,this.formdata.album.albumName=this.albums[e].albumName}}},created(){},mounted(){var e=this.$cookie.getCookie();"token"!=e[0]?(this.$message({message:"登录已过期!",type:"error"}),this.$router.push({name:"login"})):this.token=e[1],this.selectAlbums()},methods:{selectAlbums(){var e=this;const t=new FormData;t.append("token",this.token),this.axios({url:this.$serveUrL+"/album/selectAlbumName",method:"post",data:t}).then((function(t){"success"==t.data.status&&(console.log(t.data),e.albums=t.data.data)}))},SubmitImage(){if(console.log(this.$refs.upload.fileList),0==this.fileList.length)return this.$message.warning("请选取文件后再上传");this.dialogTableVisible=!0;var e=this,t=new FormData;this.fileList.forEach(e=>{t.append("file",e.raw)}),t.append("albumId",this.formdata.album.albumId),t.append("albumName",this.formdata.album.albumName),t.append("resNumber",this.formdata.resNumber),t.append("imgSite",this.formdata.imgSite),t.append("imgDate",this.formdata.imgdate),t.append("token",this.token),this.loading=!0,this.axios({url:this.$serveUrL+"/image/uploadAI",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){if(t.lengthComputable){let a=parseInt(t.loaded/t.total*100);a>=85&&(a=85),e.progressText="服务器正在识别上传 "+a+"%"}}}).then((function(t){"success"==t.data.status?(e.$message({type:"success",message:"上传图片成功!"}),e.tableData=t.data.data,e.loading=!1):e.$message({type:"fail",message:"上传图片失败!"})}))},createAlbum(){this.formdata.album.albumName=this.inputAlbum,this.formdata.album.albumId=0,this.$refs.formSelect.blur()},handleRemove(e,t){this.fileList=t,console.log(e,t)},handleChange(e,t){this.fileList=t},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}}),o=i,r=(a("d7cb"),a("2877")),m=Object(r["a"])(o,l,s,!1,null,"b4e62d06",null);t["default"]=m.exports},d7cb:function(e,t,a){"use strict";a("852a")}}]);
//# sourceMappingURL=chunk-df494f20.7f6f473a.js.map