(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47d1d9f7"],{"7e16":function(t,e,a){},"8ec6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"v-main"}},[e("div",{attrs:{id:"v-title"}},[t._v("图片地理位置数据可视化")]),e("div",{attrs:{id:"v-echart"}},[e("div",{attrs:{id:"echart"}}),e("div",{staticClass:"button"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.downloadImage()}}},[t._v("下载图表")])],1)])])},i=[],o=(a("14d9"),{name:"Visualdata",data(){return{charts:null,token:"",resizeTimer:null,serveUrL:this.$serveUrL,spots:["西安","安康"],spotCount:[12,13]}},mounted(){window.onresize=()=>{this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.charts.resize()},500)};var t=this.$cookie.getCookie();"token"!=t[0]?(this.$message({message:"登录已过期!",type:"error"}),this.$router.push({name:"login"})):this.token=t[1],this.selectImageCount()},methods:{downloadImage(){const t=document.createElement("a");t.download="图片类型分布饼图",t.style.display="none",console.log(this.charts),t.href=this.charts.getDataURL({type:"png",pixelRatio:1.5,backgroundColor:"#fff"}),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)},selectImageCount(){var t=this;const e=new FormData;e.append("token",this.token),this.axios({url:t.serveUrL+"/visual/selectTypeSite",method:"post",data:e}).then((function(e){t.spots=e.data.data.imageSite,t.spotCount=e.data.data.SiteNumber,t.$nextTick((function(){t.drawbar("echart")}))}))},drawbar(t){this.charts=this.$echarts.init(document.getElementById(t)),this.charts.setOption({title:{color:"res",text:"拍摄地点分布柱状图",subtext:"来源于数据库",left:"center"},xAxis:{type:"category",data:this.spots,name:"拍摄地点"},yAxis:{type:"value",name:"图片数量"},series:[{data:this.spotCount,type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}]})}}}),r=o,n=(a("aaaf"),a("2877")),c=Object(n["a"])(r,s,i,!1,null,"2a619116",null);e["default"]=c.exports},aaaf:function(t,e,a){"use strict";a("7e16")}}]);
//# sourceMappingURL=chunk-47d1d9f7.0e2c60db.js.map