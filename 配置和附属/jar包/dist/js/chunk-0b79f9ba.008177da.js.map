{"version":3,"sources":["webpack:///./src/views/VisualdataType.vue","webpack:///src/views/VisualdataType.vue","webpack:///./src/views/VisualdataType.vue?a8c1","webpack:///./src/views/VisualdataType.vue?39cc","webpack:///./src/views/VisualdataType.vue?0d82"],"names":["render","_vm","this","_c","_self","attrs","_v","staticClass","on","$event","downloadImage","staticRenderFns","name","data","charts","token","resizeTimer","serveUrL","$serveUrL","screenWidth","ImageType","value","mounted","window","onresize","clearTimeout","setTimeout","resize","cookie","$cookie","getCookie","$message","message","type","$router","push","selectImageCount","methods","link","document","createElement","download","style","display","console","log","href","getDataURL","pixelRatio","backgroundColor","body","appendChild","click","URL","revokeObjectURL","removeChild","_this","formData","FormData","append","axios","url","method","then","resp","imageType","$nextTick","drawPie","id","$echarts","init","getElementById","setOption","title","color","text","subtext","left","tooltip","trigger","legend","orient","series","radius","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","component"],"mappings":"gJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,WAAW,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,YAAY,CAACJ,EAAIK,GAAG,eAAeH,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,aAAa,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,YAAYF,EAAG,MAAM,CAACI,YAAY,UAAU,CAACJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOR,EAAIS,mBAAmB,CAACT,EAAIK,GAAG,WAAW,QAExXK,EAAkB,GCaP,G,UAAA,CACfC,KAAA,aACAC,OACA,OACAC,OAAA,KACAC,MAAA,GACAC,YAAA,KACAC,SAAA,KAAAC,UACAC,YAAA,GACAC,UAAA,CACA,CACAC,MAAA,IACAT,KAAA,MAEA,CACAS,MAAA,GACAT,KAAA,SAQAU,UACAC,OAAAC,SAAA,KACA,KAAAR,aACAS,aAAA,KAAAT,aAEA,KAAAA,YAAAU,WAAA,KACA,KAAAZ,OAAAa,UACA,MAGA,IAAAC,EAAA,KAAAC,QAAAC,YACA,SAAAF,EAAA,IACA,KAAAG,SAAA,CACAC,QAAA,SACAC,KAAA,UAEA,KAAAC,QAAAC,KAAA,CAAAvB,KAAA,WAGA,KAAAG,MAAAa,EAAA,GAEA,KAAAQ,oBAGAC,QAAA,CAEA3B,gBACA,MAAA4B,EAAAC,SAAAC,cAAA,KACAF,EAAAG,SAAA,WACAH,EAAAI,MAAAC,QAAA,OACAC,QAAAC,IAAA,KAAA/B,QACAwB,EAAAQ,KAAA,KAAAhC,OAAAiC,WAAA,CACAd,KAAA,MACAe,WAAA,IACAC,gBAAA,SAEAV,SAAAW,KAAAC,YAAAb,GACAA,EAAAc,QACAC,IAAAC,gBAAAhB,EAAAQ,MACAP,SAAAW,KAAAK,YAAAjB,IAGAF,mBACA,IAAAoB,EAAA,KACA,MAAAC,EAAA,IAAAC,SACAD,EAAAE,OAAA,aAAA5C,OACA,KAAA6C,MAAA,CACAC,IAAAL,EAAAvC,SAAA,yBACA6C,OAAA,OACAjD,KAAA4C,IACAM,MAAA,SAAAC,GACAR,EAAApC,UAAA4C,EAAAnD,UAAAoD,UACAT,EAAAU,WAAA,WACAV,EAAAW,QAAA,iBAOAA,QAAAC,GACA,KAAAtD,OAAA,KAAAuD,SAAAC,KAAA/B,SAAAgC,eAAAH,IACA,KAAAtD,OAAA0D,UAAA,CACAC,MAAA,CACAC,MAAA,MACAC,KAAA,WACAC,QAAA,QACAC,KAAA,OAEAC,QAAA,CACAC,QAAA,QAEAC,OAAA,CACAC,OAAA,WACAJ,KAAA,QAEAK,OAAA,CACA,CACAtE,KAAA,OACAqB,KAAA,MACAkD,OAAA,MACAtE,KAAA,KAAAO,UACAyD,KAAA,MAEAO,SAAA,CACAC,UAAA,CACAC,WAAA,GACAC,cAAA,EACAC,YAAA,+BC/HuV,I,wBCQnVC,EAAY,eACd,EACAzF,EACAW,GACA,EACA,KACA,WACA,MAIa,aAAA8E,E,2CCnBf","file":"js/chunk-0b79f9ba.008177da.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"v-main\"}},[_c('div',{attrs:{\"id\":\"v-title\"}},[_vm._v(\"图片类型数据可视化\")]),_c('div',{attrs:{\"id\":\"v-echart\"}},[_c('div',{attrs:{\"id\":\"echart\"}}),_c('div',{staticClass:\"button\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.downloadImage()}}},[_vm._v(\"下载图表\")])],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"v-main\">\n    <div id=\"v-title\">图片类型数据可视化</div>\n    <!--为echarts准备一个具备大小的容器dom-->\n    <div id=\"v-echart\">\n      <div id=\"echart\"></div>\n      <div class=\"button\">\n        <el-button type=\"primary\" @click=\"downloadImage()\">下载图表</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n\n\nexport default {\n  name: 'Visualdata',\n  data() {\n    return {\n      charts: null,//图表对象\n      token: '',  //token凭证\n      resizeTimer: null,\n      serveUrL: this.$serveUrL,\n      screenWidth: '',\n      ImageType: [       //pie表\n        {\n          value: 100,\n          name: '动物'\n        },\n        {\n          value: 11,\n          name: '植物'\n        },\n      ],\n    }\n  },\n\n\n  //调用\n  mounted() {\n    window.onresize = () => {\n      if (this.resizeTimer) {\n        clearTimeout(this.resizeTimer)\n      }\n      this.resizeTimer = setTimeout(() => {\n        this.charts.resize();\n      }, 500)\n    };\n\n    var cookie = this.$cookie.getCookie();\n    if (cookie[0] != \"token\") {\n      this.$message({\n        message: '登录已过期!',\n        type: 'error'\n      });\n      this.$router.push({ name: 'login' });\n    }\n    else {\n      this.token = cookie[1];\n    }\n    this.selectImageCount();\n\n  },\n  methods: {\n    // 下载图片\n    downloadImage() {\n      const link = document.createElement('a');\n      link.download = \"图片类型分布饼图\";\n      link.style.display = 'none';\n      console.log(this.charts)\n      link.href = this.charts.getDataURL({\n        type: 'png',\n        pixelRatio: 1.5,\n        backgroundColor: '#fff'\n      }); // 导出图表图片，返回一个 base64 的 URL\n      document.body.appendChild(link);\n      link.click();\n      URL.revokeObjectURL(link.href); //释放URL对象\n      document.body.removeChild(link);\n    },\n    //查询所有图片类型\n    selectImageCount() {\n      var _this = this;\n      const formData = new FormData();\n      formData.append('token', this.token);\n      this.axios({\n        url: _this.serveUrL + \"/visual/selectTypeSite\",\n        method: \"post\",\n        data: formData,\n      }).then(function (resp) {\n        _this.ImageType = resp.data.data.imageType;\n        _this.$nextTick(function () {\n          _this.drawPie('echart');\n\n        });\n\n      });\n    },\n\n    drawPie(id) {\n      this.charts = this.$echarts.init(document.getElementById(id))\n      this.charts.setOption({\n        title: {\n          color: 'res',\n          text: '图片类型分布饼图',\n          subtext: '来源数据库',\n          left: '50%'\n        },\n        tooltip: {\n          trigger: 'item'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 'left'\n        },\n        series: [\n          {\n            name: '数据来源',\n            type: 'pie',\n            radius: '60%',\n            data: this.ImageType,\n            left: '20%',\n\n            emphasis: {\n              itemStyle: {\n                shadowBlur: 10,\n                shadowOffsetX: 0,\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\n              }\n            }\n          }\n        ]\n      })\n    },\n\n\n\n  },\n\n}\n</script>\n<style scoped>\n#v-main {\n  width: 100%;\n  height: 90%;\n  position: relative;\n}\n\n#v-title {\n  margin-top: 1%;\n  margin-bottom: 2%;\n  text-align: center;\n  font-size: 25px;\n}\n\n#v-echart {\n  height: 90%;\n  width: 100%;\n  position: relative;\n}\n\n#echart {\n  position: absolute;\n  left: 3%;\n  height: 100%;\n  width: 80%;\n  display: inline-block;\n}\n\n.button {\n  position: absolute;\n  display: inline-block;\n  right: 5%;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualdataType.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualdataType.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./VisualdataType.vue?vue&type=template&id=9345a612&scoped=true\"\nimport script from \"./VisualdataType.vue?vue&type=script&lang=js\"\nexport * from \"./VisualdataType.vue?vue&type=script&lang=js\"\nimport style0 from \"./VisualdataType.vue?vue&type=style&index=0&id=9345a612&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9345a612\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualdataType.vue?vue&type=style&index=0&id=9345a612&prod&scoped=true&lang=css\""],"sourceRoot":""}